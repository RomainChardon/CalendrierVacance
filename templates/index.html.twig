{% extends 'base.html.twig' %}

{% block title %}Hello Controller!{% endblock %}

{% block body %}
<div class="min-h-screen flex flex-col justify-center bg-gray-100">
    <div class="px-10 w-auto p-4 shadow-2xl mx-auto rounded-2xl bg-white">
        <div class="px-10 w-96 p-4 mx-auto">
            <div class="text-2xl m-3 font-extrabold text-center mb-5">
                <h1 class="">Ajouter des vacances</h1>
            </div>
            <form action="{{ path('create_vacances') }}" method="POST">
                <div class="">
                    <p class="border border-blue-400 shadow-md rounded p-1.5 w-full">
                        {{ app.user.nom }}
                        {{ app.user.prenom }}
                    </p>
                </div>
                <div class="mt-3"> 
                    <label for="date_debut" class="">date début :</label><br>
                    <input type="date" name="date_debut" class="border border-blue-400 shadow-md rounded p-1.5 w-full" id="date_debut">
                </div>
                <div class="mt-3"> 
                    <label for="date_fin" class="">date fin :</label><br>
                    <input type="date" name="date_fin" id="date_fin" class="border border-blue-400 shadow-md rounded p-1.5 w-full">
                </div>
                <div class="container w-full mt-4 flex justify-end">
                    <input type="submit" value="envoi" class="border border-blue-400 shadow-md rounded p-1.5 w-full px-5 hover:bg-blue-400 transition duration-200 ">
                </div>
            </form>
        </div>

        <table class="mt-5 " >
        <thead class="p-2 border-b border-blue-400">
            <tr>
                <th class="p-2 px-4 border-r border-blue-200">Nom</th>
                <th class="p-2 px-4 border-r border-blue-200">Prénom</th>
                <th class="p-2 px-4 border-r border-blue-200">Début</th>
                <th class="p-2 px-4 border-r border-blue-200">Fin</th>
                <th class="p-2 px-4 border-r border-blue-200">En attente</th>
                <th class="p-2 px-4 border-r border-blue-200">Accordé</th>
                <th class="p-2 px-4 ">Option</th>
            </tr>
        </thead>
        <tbody class="text-center">
            {% for uneVacance in toutesLesVacances %}
            <tr class="p-2 border-b border-blue-400">
                <td class="p-2 border-r border-blue-200">
                    {% for utilisateur in uneVacance.getUsers %} 
                        {{ utilisateur.nom }}
                    {% endfor %}
                </td>
                <td class="p-2 border-r border-blue-200">
                    {% for utilisateur in uneVacance.getUsers %} 
                        {{ utilisateur.prenom }}
                    {% endfor %}
                </td>
                <td class="p-2 border-r border-blue-200">
                    {{ uneVacance.dateDebut|date("d/m/Y") }}
                </td>
                <td class="p-2 border-r border-blue-200">
                    {{ uneVacance.dateFin|date("d/m/Y") }}
                </td>
                <td class="p-2 border-r border-blue-200">
                    {% if uneVacance.attente == '1' %}
                        <span>Oui</span>
                        {% elseif uneVacance.attente == '0' %}
                            <span>Non</span>
                    {% endif %}
                </td>
                <td class="p-2 border-r border-blue-200">
                    {% if uneVacance.autoriser == '1' %}
                        <span>Oui</span>
                        {% elseif uneVacance.autoriser == '0' %}
                            <span>Non</span>
                    {% endif %}       
                </td>
                <td class="p-2 border-r border-blue-200">
                    <form action="{{ path('remove_vacance',{'id':uneVacance.id}) }}" method="POST"><button type="submit">supprimer</button></form>
                </td>
                <td class="p-2 ">
                    <form action="{{ path('modif_vacance',{'id':uneVacance.id}) }}" method="POST"><button type="submit">modifier</button></form>
                </td>
            </tr>
        {% endfor %}
        </tbody>
        </table>
    </div>
</div>
{% endblock %}